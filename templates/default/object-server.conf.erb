[DEFAULT]
user = swift
swift_dir = /etc/swift
devices = /srv/node
workers = <%= [ node[:cpu][:total] - 1, 1 ].max %>
bind_ip = <%= @bind_ip %>
bind_port = <%= @bind_port %>

[pipeline:main]
pipeline = healthcheck recon object-server

[app:object-server]
use = egg:swift#object
set log_facility = LOG_LOCAL1
mb_per_sync = 64

[filter:healthcheck]
use = egg:swift#healthcheck

[filter:recon]
use = egg:swift#recon
log_facility = LOG_LOCAL2
recon_cache_path = /var/cache/swift

[object-replicator]
log_facility = LOG_LOCAL2
concurrency =  <%= [ node[:cpu][:total] - 1, 1 ].max / 2 %>
recon_enable = yes
recon_cache_path = /var/cache/swift

[object-updater]
log_facility = LOG_LOCAL2
concurrency = 1
node_timeout = 60
conn_timeout = 5

[object-auditor]
log_facility = LOG_LOCAL2

